# 信息检索导论

> 第一章主要介绍倒排索引：并说明如何通过这种索引实现简单的布尔查询。

## 第一章：布尔检索

信息检索（Information Retrieval，简称IR）的含义可以非常广。学术意义上的信息检索定义为：
    信息检索时=是从大规模非结构化数据（通常时文本）的集合（通常保持在计算机上）中找出满足用户信息需求的资料（通常时文档）的过程。

1. 正向索引
   1. 结构：
   “文档1”的ID->单词1：出现次数，出现位置列表；单词2：出现次数，出现文章列表；......。
   “文档2”的ID->此文档出现的关键词列表。
   2. 因为互联网上收录在搜索引擎中的文档的数目是个天文数字，这样的索引结构根本无法满足实时返回排名结果的要求。
2. 倒排索引
   1. 结构：
   “关键词1”：“文档1”的ID,“文档2”的ID,......。
   “关键词2”：带有此关键词的文档ID列表。
   2. 基本概念
      1. 文档（Document）：以文本形式存在的储存对象。
      2. 文档集合（Document Collection）：由若干文档构成的集合。
      3. 文档编号（Document ID）：将文档集合内每个文档赋予一个唯一的内部编号。
      4. 单词列表（Word ID）：与文档编号类似，用唯一的编号来表征某个单词。
      5. 单词列表（PostingList）：倒排列表记载了出现在某个单词的所有文档列表及单词在该文档中出现的位置信息，每条记录称为一个倒排项（Posting）。
3. 单词——文档矩阵
   单词——文档矩阵是表达两者之间所具有的一种包含关系，每列代表一个文档，每行代表一个单词。
4. 布尔查询的处理
5. 构建倒排序的几个主要步骤
   1. 收集待索引的文档；
   2. 对这些文档中的文本进行词条化；
   3. 对第二步产生的词条进行语言预处理，得到词项；
   4. 根据词项对所有文档建立索引

> 第二章介绍索引之前的文档预处理过程，并讨论在不同的功能和速度要求下对倒排索引进行改进的方法。

## 第二章：词项词典及倒排记录表

1. 文档分析及编码转换
   1. 字符序列的生成：作为索引构建过程的输入，数字文档一般由文件中或者Web服务器上的一系列字节组成。因此，文档处理的第一步往往是将这些字节序列转换成线性的字符序列。
   2. 文档单位的选择：确定索引的文档单位（ document unit）。
2. 词项集合的确定
   1. 词条化：定义好文档单位之后，词条化是将给定的字符序列拆分成一系列子序列的过程，其中每个子序列称为一个词条（token）。在这个过程中，可能会去掉一些特殊字符，如标点符号等。主要任务时确定哪些才是真正的词条。
   2. 去除停用词：某些情况下，一些常见词在文档和用户需求进行匹配时价值并不大，需要彻底从词汇表中去除。
   大停用词表->小停用词表->不用停用词表
   3. 词项归一化：将文档和查询转换成一个个的词条之后，最简单的情况就是查询中的词条正好和文档中的词条相一致。
      1. 词条归一化（token normalization）就是将看起来不完全一致的多个词条归纳成一个等价类，以便在它们之间进行匹配的过程。最常规的做法是隐式地建立等价类，每类可以用其中的某个元素来命名。
      2. 另一种建立等价类的方法时维护多个非归一化词条之间的关联关系。
   4. 词干还原和词形归并
      1. 词干还原：很粗略的去除单词两端词汇的启发式过程。
      2. 词形归并：通常利用词汇表和词形分析来去除屈折词缀。
3. 基于跳表的倒排记录快速合并算法
   1. 放置调表指针位置的一个简单的启发式策略时，在每个$\sqrt{P}$出均匀放置跳表指针，这个策略在实际中效果不错，但是任然有提高的余地，因为它并没有考虑查询词项的任何分布细节。
4. 含有位置信息的倒排记录表及短语查询
   1. 二元词索引：
   stanford university palo alto => "standford university" AND "university palo" AND "palo alto"
   2. 位置信息索引
   3. 混合索引机制

> 第三章主要介绍词典搜索的数据结构，并给出查询存在拼写错误或者与被搜索的文档中的词汇不能精确匹配时的处理方法。

### 第三章：词典及容错式检索

前两章陈述布尔查询和邻近查询，本章讲述对查询中存在拼写错误或存在不同拼写形式具有鲁棒性的拼写校验技术。

1. 词典搜索的数据结构
   1. 哈希表方式
   2. 搜索树方式
2. 通配符查询
   1. 使用场景
      1. 用户对查询的拼写不太确定
      2. 用户知道某个查询可能有不同的拼写版本，并且要把包含这些版本的文档都找出来
      3. 用户查找某个查询词项的所有变形，这些变形可能够还做了词干还原，但是用户并不知道搜索引擎是否进行了词干还原
      4. 用户不确定一个外来词或者短语的正确拼写方式
   2. 一般的通配符查询
      1. 轮排索引
      2. 支持通配符查询的k-gram索引
   3. 拼写校正
      1. 词项独立（isolated-term）的校正
         1. 编辑距离
            ```c
            EDITDISTANCE(s1, s2)
            int m[|s1|, |s2|] = 0
            for i <- 1 to |s1|
            do m[i, 0] = i
            for j <- 1 to |s2|
            do m[0, j] = j
            for i <- 1 to |s1|
            do for j <- 1 to |s2|
               do m[i, j] = min{m[i-1, j-1] + if(s1[i] = s2[j]) then 0 else 1fi,
                              m[i-1, j] + 1,
                              m[i, j-1] + 1}
            return m[|s1|, |s2|]
            ```
         2. k-gram
      2. 上下文敏感（context-sensitive）的校正
   4. 基于发音的校正技术

> 第四章主要介绍基于文本集合构建倒排索引的几个算法，并着重介绍具有高扩展性的分布式算法，这类算法适用于大规模文档集的索引构建。

### 第四章：索引构建

1. 基于块的排序索引方法
   1. 将文档集分割成几个大小相等的部分
   2. 将每个部分的词项ID-文档ID对排序
   3. 将中间产生的临时排序结果存放在磁盘中
   4. 将所提中间文件合并成最终的索引
2. 内存式单遍扫描索引构建方法
3. 分布式索引构建方法
4. 动态索引构建方法
   1. 周期性索引
   2. 保持两个索引：大的主索引，小的用于存储新文档信息的辅助索引

> 第五章介绍词典和倒排索引的压缩技术。这些技术对于实现大型搜索引擎的亚秒级查询响应十分关键。

### 第五章：索引压缩

1. 索引压缩的优点：
   1. 增加高速缓存技术的利用率
   2. 压缩能够加快数据从磁盘到内存的传输速度
2. Heaps定律
   一个对词项数目M进行更好估计的方法时采用Heaps定律，它将词项的数目估计成文档集大小的一个函数：
   $$M=kT^b$$
   其中，T时文档集合的词条个数。参数k和b的典型取值为：$30\leq k \leq 100, b\approx 0.5$
3. Zipf定律：对词项的分布建模
   估计词项在文档中分布的模型时Zipf定律，它的主要内容如下：如果$t_1$时文档集中的出现最多的词项，$t_2$时文档集中方的出现第二多的词项，一次类推，那么排名第i多的词项的文档集评论$cf_i$与1/i成正比，即
   $$cf_i\propto \frac{1}{i}$$
4. 词典压缩
   1. 将词典看成单一字符串的压缩方法
   2. 按块存储
5. 倒排记录表的压缩
   1. 可变字节码
   2. $\gamma$编码

> 词项权重计算和评分算法的主要内容：给定查询，我们可以利用这两章介绍的技术，按照文档评分的结果次序输出结果列表

### 第六章：文档评分、词项权重计算及向量空间模型

1. 参数化索引及域索引
   大多数文档都具有额外的结构信息
   域（zone）和字段很相似，只是它的内容可以是任意的自由文本。字段通常的取值可能性相对较小，而域可以由任意的、数目无限制的文本构成。比如，通常可以把文档的标题和摘要看作域。
   1. 域加权得分
   给定一个布尔查询q和一篇文档d，域加权评分方法给每个（q，d）对计算出一个[0,1]之间的得分，该得分由每个域上的得分线性组合而成，而每个域上的得分取布尔值：要么时0，要么时1。
   2. 权重学习
   倾向于从人工标注好的训练数据中学习得到这些权重，这种方法属于信息检索中一类被称为机器学习相关性评分及排序方法的范畴。
   3. 最优权重g的计算
2. 词项频率及权重计算
   1. 逆文档频率
   原始的词项频率面临这样一个严重问题，即在和查询进行相关度计算时，所有的词项都被认为时同等重要的。实际上，某些词项对于相关度计算来说几乎没有或很少有区分能力。
   一种方法时给文档集频率较高的词项赋予较低的权重。
   一种更常用到的因子时文档频率$df_t$，它表示的时出现t的所有文档的数目。
   2. tf-idf权重计算
   对于每篇文档中的每个词项，可以将其tf和idf组合在一起形成最终的权重。
3. 向量空间模型

### 第七章：一个完整搜索系统中的评分计算

1. 快速评分及排序
